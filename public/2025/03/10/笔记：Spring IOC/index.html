

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/ba.jpg">
  <link rel="icon" href="/img/ba.jpg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#373737">
  <meta name="author" content="霸天">
  <meta name="keywords" content="">
  
    <meta name="description" content="你写的这个 MinioClient 的创建方式，整体思路是对的，而且是主流的 Spring Boot 配置方式。不过这里有几个细节可以帮你确认和优化，保证代码更健壮和规范：  endpoint 格式   MinioClient 的 endpoint 一般要求带协议，比如 http:&#x2F;&#x2F;192.168.136.8:9000，否则默认可能会有问题或者抛异常。  你写的 &quot;192.168.13">
<meta property="og:type" content="article">
<meta property="og:title" content="笔记：Spring IOC">
<meta property="og:url" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/index.html">
<meta property="og:site_name" content="夜阑卧听风吹雨,一枝梨花压心头">
<meta property="og:description" content="你写的这个 MinioClient 的创建方式，整体思路是对的，而且是主流的 Spring Boot 配置方式。不过这里有几个细节可以帮你确认和优化，保证代码更健壮和规范：  endpoint 格式   MinioClient 的 endpoint 一般要求带协议，比如 http:&#x2F;&#x2F;192.168.136.8:9000，否则默认可能会有问题或者抛异常。  你写的 &quot;192.168.13">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250707124724752.png">
<meta property="og:image" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250704122212717.png">
<meta property="og:image" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250703215302874.png">
<meta property="og:image" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250703103102608.png">
<meta property="og:image" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250703103116668.png">
<meta property="og:image" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250701205019198.png">
<meta property="og:image" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250701205226473.png">
<meta property="og:image" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250519160241335.png">
<meta property="og:image" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250519160340948.png">
<meta property="og:image" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250519160346033.png">
<meta property="og:image" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250518162951182.png">
<meta property="og:image" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250518163131432.png">
<meta property="article:published_time" content="2025-03-09T16:00:00.000Z">
<meta property="article:modified_time" content="2025-07-08T09:33:29.685Z">
<meta property="article:author" content="Ba Tian">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://wangjia5289.github.io/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250707124724752.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>笔记：Spring IOC - 夜阑卧听风吹雨,一枝梨花压心头</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"wangjia5289.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  



  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 100vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91%E5%85%89%E5%BD%B1%E7%BE%8E%E5%AD%A6-%E5%90%8A%E5%B8%A6%E8%A3%99.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="笔记：Spring IOC"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-03-10 00:00" pubdate>
          March 10, 2025 am
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          11k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          91 mins
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> views
        </span>
        

      
    
  </div>


        
      </div>

      
        <div class="scroll-down-bar">
          <i class="iconfont icon-arrowdown"></i>
        </div>
      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">笔记：Spring IOC</h1>
            
              <p id="updated-time" class="note note-info" style="display: none">
                
                  
                    Last updated on 2025-07-08T17:33:29+08:00
                  
                  

                
              </p>
            
            
              <div class="markdown-body">
                
                <p>你写的这个 MinioClient 的创建方式，整体思路是对的，而且是主流的 Spring Boot 配置方式。不过这里有几个细节可以帮你确认和优化，保证代码更健壮和规范：</p>
<ol>
<li><strong>endpoint 格式</strong></li>
</ol>
<ul>
<li><p>MinioClient 的 <code>endpoint</code> 一般要求带协议，比如 <code>http://192.168.136.8:9000</code>，否则默认可能会有问题或者抛异常。</p>
</li>
<li><p>你写的 <code>&quot;192.168.136.8:9000&quot;</code> 可能在某些版本的 MinioClient 会报错或无法连接，建议加上协议。</p>
</li>
</ul>
<ol start="2">
<li><strong>证书和安全性</strong></li>
</ol>
<ul>
<li><p>如果你的 Minio 是 HTTP 直连，当前写法是可以的。</p>
</li>
<li><p>如果启用了 HTTPS，证书校验、信任管理就要额外配置。</p>
</li>
</ul>
<ol start="3">
<li><strong>异常处理</strong></li>
</ol>
<ul>
<li>虽然 Spring 容器会管理这个 Bean，但构建过程中可能抛异常，建议在创建时注意捕获或确认版本的行为。</li>
</ul>
<ol start="4">
<li><strong>可配置化</strong></li>
</ol>
<ul>
<li>通常这些配置信息（endpoint、用户名、密码）会放在 <code>application.properties</code> 或 <code>application.yml</code> 中，用 <code>@Value</code> 或 <code>@ConfigurationProperties</code> 注入，方便不同环境切换。</li>
</ul>
<p>你参考下优化版示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MinioConfig</span> &#123;<br><br>    <span class="hljs-meta">@Value(&quot;$&#123;minio.endpoint&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String endpoint;<br><br>    <span class="hljs-meta">@Value(&quot;$&#123;minio.access-key&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String accessKey;<br><br>    <span class="hljs-meta">@Value(&quot;$&#123;minio.secret-key&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String secretKey;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> MinioClient <span class="hljs-title function_">minioClient</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> MinioClient.builder()<br>                .endpoint(endpoint)          <span class="hljs-comment">// 如 http://192.168.136.8:9000</span><br>                .credentials(accessKey, secretKey)<br>                .build();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>然后在 <code>application.properties</code> 里配置：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">minio.endpoint</span>=http://<span class="hljs-number">192.168</span>.<span class="hljs-number">136.8</span>:<span class="hljs-number">9000</span><br><span class="hljs-attr">minio.access-key</span>=admin<br><span class="hljs-attr">minio.secret-key</span>=admin123<br></code></pre></td></tr></table></figure>

<p>这样更灵活，也方便后续维护和环境切换。你觉得呢？如果你想，我还可以帮你写个带配置文件读取的完整示范。</p>
<p><img src="/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250707124724752.png" srcset="/img/loading.gif" lazyload></p>
<p>你的需求很典型，想自己写一个配置类，让 <code>application.yml</code> 里的配置能绑定到它，同时 IDEA 能智能提示，体验更好。这个是 Spring Boot 里配置绑定的标准做法。</p>
<p>我帮你梳理<strong>完整步骤和关键点</strong>，确保你写的配置类和 <code>application.yml</code> 配置能完美对应，还能被 IDEA 智能识别和提示。</p>
<hr>
<h2 id="一、如何写一个自己的配置类，实现-application-yml-绑定和-IDEA-提示？"><a href="#一、如何写一个自己的配置类，实现-application-yml-绑定和-IDEA-提示？" class="headerlink" title="一、如何写一个自己的配置类，实现 application.yml 绑定和 IDEA 提示？"></a>一、如何写一个自己的配置类，实现 <code>application.yml</code> 绑定和 IDEA 提示？</h2><h3 id="1-添加依赖（如果没加）"><a href="#1-添加依赖（如果没加）" class="headerlink" title="1. 添加依赖（如果没加）"></a>1. 添加依赖（如果没加）</h3><p>为了支持配置类元信息生成和 IDEA 提示，pom.xml 里加上：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>这是官方配置元信息处理器，IDEA 会读取它生成的提示。</p>
</blockquote>
<hr>
<h3 id="2-编写配置类"><a href="#2-编写配置类" class="headerlink" title="2. 编写配置类"></a>2. 编写配置类</h3><ul>
<li><p>用 <code>@ConfigurationProperties</code> 注解，定义你自己的前缀</p>
</li>
<li><p>推荐加上 <code>@Component</code> 或在配置类中 <code>@EnableConfigurationProperties</code> 注入</p>
</li>
<li><p>每个属性写成标准的 Java Bean 风格（get&#x2F;set）</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.example.config;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;myapp.oauth&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyOAuthProperties</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String clientId;<br>    <span class="hljs-keyword">private</span> String clientSecret;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getClientId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> clientId;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setClientId</span><span class="hljs-params">(String clientId)</span> &#123;<br>        <span class="hljs-built_in">this</span>.clientId = clientId;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getClientSecret</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> clientSecret;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setClientSecret</span><span class="hljs-params">(String clientSecret)</span> &#123;<br>        <span class="hljs-built_in">this</span>.clientSecret = clientSecret;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="3-在-application-yml-中写配置"><a href="#3-在-application-yml-中写配置" class="headerlink" title="3. 在 application.yml 中写配置"></a>3. 在 <code>application.yml</code> 中写配置</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">myapp:</span><br>  <span class="hljs-attr">oauth:</span><br>    <span class="hljs-attr">clientId:</span> <span class="hljs-string">abc123</span><br>    <span class="hljs-attr">clientSecret:</span> <span class="hljs-string">secret456</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="4-IDEA-中智能提示生效关键点"><a href="#4-IDEA-中智能提示生效关键点" class="headerlink" title="4. IDEA 中智能提示生效关键点"></a>4. IDEA 中智能提示生效关键点</h3><ul>
<li><p><strong>确保已引入 spring-boot-configuration-processor 依赖</strong>，并且已经构建过项目，IDEA 会根据生成的 <code>META-INF/spring-configuration-metadata.json</code> 识别配置。</p>
</li>
<li><p>IDEA 一般会在你写配置文件时根据该 JSON 给出提示，包括自动补全和校验。</p>
</li>
</ul>
<hr>
<h3 id="5-如果没有自动提示，可以尝试："><a href="#5-如果没有自动提示，可以尝试：" class="headerlink" title="5. 如果没有自动提示，可以尝试："></a>5. 如果没有自动提示，可以尝试：</h3><ul>
<li><p>重新构建项目（Build -&gt; Rebuild Project）</p>
</li>
<li><p>关闭再打开 <code>application.yml</code> 文件</p>
</li>
<li><p>清理并重启 IDEA 缓存（File -&gt; Invalidate Caches &#x2F; Restart）</p>
</li>
</ul>
<hr>
<h2 id="二、总结"><a href="#二、总结" class="headerlink" title="二、总结"></a>二、总结</h2><table>
<thead>
<tr>
<th>步骤</th>
<th>关键点</th>
</tr>
</thead>
<tbody><tr>
<td>依赖</td>
<td>添加 <code>spring-boot-configuration-processor</code></td>
</tr>
<tr>
<td>配置类</td>
<td>用 <code>@ConfigurationProperties(prefix = &quot;...&quot;)</code> 标注，且写标准 Java Bean 结构</td>
</tr>
<tr>
<td>Bean 注册</td>
<td>用 <code>@Component</code> 或在配置类&#x2F;启动类用 <code>@EnableConfigurationProperties</code> 启用</td>
</tr>
<tr>
<td>配置文件</td>
<td>写符合前缀规范的 YAML&#x2F;Properties 配置项</td>
</tr>
<tr>
<td>IDEA 支持</td>
<td>正确依赖引入和项目构建后，IDEA 自动提示配置项</td>
</tr>
</tbody></table>
<hr>
<p>如果你需要，我也可以帮你写一个示例的完整项目结构，或者帮你检查你写的配置类哪里没对上导致不提示。你想要吗？</p>
<p>想要学一下这个 OAuth2 Client 的配置就很合适，不是直接注入到最后的，而是有个中介</p>
<h2 id="🧭-整个流程是这样的："><a href="#🧭-整个流程是这样的：" class="headerlink" title="🧭 整个流程是这样的："></a>🧭 整个流程是这样的：</h2><ol>
<li><p>✅ Spring Boot 启动时，读取 <code>application.yml</code></p>
</li>
<li><p>✅ 把 <code>spring.security.oauth2.client.*</code> 配置绑定到 <code>OAuth2ClientProperties</code></p>
</li>
<li><p>✅ Spring Boot 的自动配置类（比如 <code>OAuth2ClientRegistrationRepositoryConfiguration</code>）调用 <code>OAuth2ClientProperties#getRegistration()</code></p>
</li>
<li><p>✅ 遍历你配置的每个客户端（如 gitee）</p>
</li>
<li><p>✅ 为每一个客户端调用 <code>ClientRegistration.Builder</code> 构建 <code>ClientRegistration</code> 实例</p>
</li>
</ol>
<p>最终 Spring Security 就拿着这个 <code>ClientRegistration</code> 对象，去做 OAuth2 的发起、重定向、Token 获取、用户信息请求等。</p>
<p>这是个非常核心又容易忽略的问题。Spring Boot 的“配置”其实不是直接配置到某个类上，而是<strong>通过自动装配机制，把配置值绑定到相关的 Bean 或配置类中去</strong>。你可以从这几个方面理解：</p>
<hr>
<h3 id="一、配置的来源"><a href="#一、配置的来源" class="headerlink" title="一、配置的来源"></a>一、配置的来源</h3><p>Spring Boot 支持多种配置来源，最常见的是：</p>
<ul>
<li><p><code>application.properties</code> 或 <code>application.yml</code></p>
</li>
<li><p>命令行参数、环境变量、<code>@Value</code> 注解</p>
</li>
<li><p>外部配置服务（如 Nacos、Consul）</p>
</li>
</ul>
<p>这些配置本身只是<strong>键值对</strong>，但它们最终都会通过 <strong>绑定</strong> 或 <strong>条件装配</strong> 的方式作用于 Spring 容器中的某些 Bean。</p>
<hr>
<h3 id="二、配置去到了哪里？"><a href="#二、配置去到了哪里？" class="headerlink" title="二、配置去到了哪里？"></a>二、配置去到了哪里？</h3><ol>
<li><strong>绑定到配置类（<code>@ConfigurationProperties</code>）</strong></li>
</ol>
<p>Spring Boot 内置了大量的配置类，比如：</p>
<ul>
<li><p><code>org.springframework.boot.autoconfigure.web.ServerProperties</code><br>  → 用来读取 <code>server.port</code>、<code>server.servlet.context-path</code> 等</p>
</li>
<li><p><code>org.springframework.boot.autoconfigure.jdbc.DataSourceProperties</code><br>  → 读取 <code>spring.datasource.url</code>、<code>spring.datasource.username</code></p>
</li>
</ul>
<p>Spring Boot 启动时，会自动扫描这些带有 <code>@ConfigurationProperties</code> 的类，把配置文件中的值注入进去。</p>
<ol start="2">
<li><strong>作用于自动配置类（<code>@EnableAutoConfiguration</code>）</strong></li>
</ol>
<p>Spring Boot 的核心机制是“自动配置”，即：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(DemoApplication.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>这个注解背后其实是 <code>@EnableAutoConfiguration</code>，它会加载 <code>META-INF/spring.factories</code>（或 Boot 3.x 用 <code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>）中声明的自动配置类。</p>
<p>比如你配置了：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring.mvc.view.prefix:</span> <span class="hljs-string">/WEB-INF/views/</span><br></code></pre></td></tr></table></figure>

<p>这个值会绑定到 <code>WebMvcProperties</code> 中，再被 <code>WebMvcAutoConfiguration</code> 使用，来设置视图解析器。</p>
<ol start="3">
<li><strong>配置注入到 Bean 中（<code>@Value</code>）</strong></li>
</ol>
<p>如果你写了：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Value(&quot;$&#123;my.custom.name&#125;&quot;)</span><br><span class="hljs-keyword">private</span> String name;<br></code></pre></td></tr></table></figure>

<p>这个是最直接的，Spring 会在容器初始化时，自动把配置文件里的值注入进去。</p>
<hr>
<h3 id="三、总结性一句话"><a href="#三、总结性一句话" class="headerlink" title="三、总结性一句话"></a>三、总结性一句话</h3><blockquote>
<p>Spring Boot 配置文件中的值，<strong>不是配置到某一个类上</strong>，而是：</p>
<ul>
<li><p><strong>绑定到配置类（<code>@ConfigurationProperties</code>）</strong>；</p>
</li>
<li><p><strong>影响自动配置类的装配行为</strong>；</p>
</li>
<li><p><strong>可通过 <code>@Value</code> 注入到 Bean 中</strong>；</p>
</li>
<li><p><strong>最终决定 Bean 的属性值、是否加载某个 Bean 等行为</strong>。</p>
</li>
</ul>
</blockquote>
<hr>
<h3 id="如果你想“看见”这些配置是去哪了？"><a href="#如果你想“看见”这些配置是去哪了？" class="headerlink" title="如果你想“看见”这些配置是去哪了？"></a>如果你想“看见”这些配置是去哪了？</h3><p>你可以：</p>
<h4 id="✅-开启配置元信息元数据支持"><a href="#✅-开启配置元信息元数据支持" class="headerlink" title="✅ 开启配置元信息元数据支持"></a>✅ 开启配置元信息元数据支持</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>然后去看 IDE 中提示出来的 <code>@ConfigurationProperties</code> 类都有哪些字段支持配置。</p>
<h4 id="✅-打开调试日志"><a href="#✅-打开调试日志" class="headerlink" title="✅ 打开调试日志"></a>✅ 打开调试日志</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">logging.level.org.springframework.boot.autoconfigure</span>=<span class="hljs-string">DEBUG</span><br></code></pre></td></tr></table></figure>

<p>你会看到哪些自动配置类被加载了、哪些条件没满足没加载。</p>
<hr>
<p>如你需要，我也可以帮你找几个典型配置，看它们是怎么绑定到 Spring Bean 的。要不要？</p>
<p><img src="/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250704122212717.png" srcset="/img/loading.gif" lazyload></p>
<p>不能这样做，会报错，要想在本方法用，只能 csrfTokenRepository()</p>
<p><img src="/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250703215302874.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="两种注册方式啊"><a href="#两种注册方式啊" class="headerlink" title="两种注册方式啊"></a>两种注册方式啊</h2><p><img src="/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250703103102608.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250703103116668.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>[!NOTE] 注意事项</p>
<ol>
<li>如果我们是使用 <code>AuthenticationManager</code> 进行认证，它会自动将用户发送来的用户名和密码，与我们的 <code>CustomerUserDetailsImpl</code> 中返回的用户名和密码进行比对，这是我们已知的逻辑。那你可能会有疑问：它在比对前，肯定需要先用密码加密器对用户发送来的明文密码进行加密，然后再比对吧？可我并没有做任何相关配置，<code>AuthenticationManager</code> 怎么知道该使用哪个加密器？</li>
<li>其实，只要你注册了一个类型为 <code>PasswordEncoder</code> 的 接口 Bean，这个 接口 Bean 有一个具体实现，<code>AuthenticationManager</code> 就会知道使用这个 <code>PasswordEncoder</code> Bean 与其具体实现，对密码进行加密，<strong>无需我们手动配置</strong>。</li>
<li>同样的，只要你注册了一个类型为 <code>UserDetailsService</code> 的 Bean（接口 Bean），这个 接口 Bean 有一个具体的实现，<code>AuthenticationManager</code> 就会知道使用这个 <code>UserDetailsService</code> Bean 与其具体实现，去获取 <code>CustomerUserDetailsImpl</code> <strong>无需我们手动配置</strong>。</li>
<li>上述，只限于接口 Bean 只有一个具体实现，如果有多个具体实现，那就要我们进行配置了，因为 Spring Security 虽然知道用这个 Bean，但是并不知道使用哪一个具体实现</li>
</ol>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs markdown">/**<br><span class="hljs-bullet"> *</span> ============================================<br><span class="hljs-bullet"> *</span> Spring IoC 声明 Bean 的常用方式 1<br><span class="hljs-bullet"> *</span> --------------------------------------------<br><span class="hljs-bullet"> *</span> 概念：<br><span class="hljs-bullet"> *</span> - 同时注册了 UserDetailsService 接口类型的 Bean 和 CustomerUserDetailsImplService 实现类类型的 Bean<br><span class="hljs-bullet"> *</span> - CustomerUserDetailsImplService 是该接口的一个具体实现类，IoC 容器中可能存在多个这样的实现类 Bean<br><span class="hljs-bullet"> *</span> - 我们既可以注入 CustomerUserDetailsImplService 类 Bean，也可以注入 UserDetailsService 接口 Bean<br><span class="hljs-bullet"> *</span> - 如果注入的是 UserDetailsService，且只有一个实现类，那么调用接口方法时，实际就是调用该实现类的方法<br><span class="hljs-bullet"> *</span> - 如果存在多个实现类，则需要通过配置明确指定使用哪个实现类<br><span class="hljs-bullet"> *</span> - 简而言之，此方式支持一个接口 Bean 有多个实现类 Bean，切换实现时只需调整配置，指定使用哪一个实现即可<br><span class="hljs-bullet"> *</span> ============================================<br> <span class="hljs-emphasis">*/</span><br><span class="hljs-emphasis">@Service</span><br><span class="hljs-emphasis">public class CustomerUserDetailsImplService implements UserDetailsService &#123;</span><br><span class="hljs-emphasis">	......</span><br><span class="hljs-emphasis">&#125;</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">/*</span>*<br><span class="hljs-bullet"> *</span> ============================================<br><span class="hljs-bullet"> *</span> Spring IoC 声明 Bean 的常用方式 2<br><span class="hljs-bullet"> *</span> --------------------------------------------<br><span class="hljs-bullet"> *</span> 概念：<br><span class="hljs-bullet"> *</span> - 仅注册了 UserDetailsService 类型的 Bean，返回的 CustomerUserDetailsImplService 实例是其具体实现类<br><span class="hljs-bullet"> *</span> - 此方式下，一个接口 Bean 只能绑定一个实现类，若要更换实现，需在此方法中直接修改返回的实例。<br><span class="hljs-bullet"> *</span> ============================================<br> <span class="hljs-emphasis">*/</span><br><span class="hljs-emphasis">@Bean</span><br><span class="hljs-emphasis">public UserDetailsService userDetailsService() &#123;</span><br><span class="hljs-emphasis">    return new CustomerUserDetailsImplService();</span><br><span class="hljs-emphasis">&#125;</span><br></code></pre></td></tr></table></figure>


<hr>
<p><img src="/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250701205019198.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250701205226473.png" srcset="/img/loading.gif" lazyload></p>
<p>其实这就是 Spring IOC 的核心思想了，对吧，你的接口这些方法都已经制定好了</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> interface PasswordEncoder &#123;  <br>    <span class="hljs-function"><span class="hljs-type">String</span> <span class="hljs-title">encode</span><span class="hljs-params">(CharSequence rawPassword)</span></span>;  <br>  <br>    <span class="hljs-function"><span class="hljs-type">boolean</span> <span class="hljs-title">matches</span><span class="hljs-params">(CharSequence rawPassword, <span class="hljs-type">String</span> encodedPassword)</span></span>;  <br>  <br>    <span class="hljs-function"><span class="hljs-keyword">default</span> <span class="hljs-type">boolean</span> <span class="hljs-title">upgradeEncoding</span><span class="hljs-params">(<span class="hljs-type">String</span> encodedPassword)</span> </span>&#123;  <br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure>
<p>然后这些实现，都会去实现你这些方法，我们将接口直接声明为 Bean，然后选择一个合适的实现类进行返回，其实这个接口呢，就可以使用这个实现类实现的方法，以后如果我们要修改实现类，只需要修改以下这个return new BCY 到其他的，然后呢，其他的代码都不用变了，如果你是直接 Bean BCY，那你如果以后像用一个其他的，那你还得把所有的BCY 找出来，一一替换</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Configuration</span><br><span class="hljs-variable">@EnableWebSecurity</span> <br>public class SecurityConfig &#123;<br>    <span class="hljs-variable">@Bean</span> <br>    public PasswordEncoder <span class="hljs-built_in">passwordEncoder</span>() &#123;<br>        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">BCryptPasswordEncoder</span>(); <span class="hljs-comment">// 返回合适的实现类</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@Controller</span>  <br><span class="hljs-meta">@RequestMapping(<span class="hljs-string">&quot;/security&quot;</span>)</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PasswordController</span> &#123;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PasswordEncoder passwordEncoder;  <br>  <br>    <span class="hljs-meta">@Autowired</span>  <br>    <span class="hljs-keyword">public</span> PasswordController(PasswordEncoder passwordEncoder) &#123;  <br>        <span class="hljs-keyword">this</span>.passwordEncoder = passwordEncoder;  <br>    &#125;  <br>      <br>    <span class="hljs-comment">// 通过方法处理密码加密  </span><br>    <span class="hljs-meta">@RequestMapping(<span class="hljs-string">&quot;/encode-password&quot;</span>)</span>  <br>    <span class="hljs-meta">@ResponseBody</span>  <br>    <span class="hljs-keyword">public</span> String encodePassword() &#123;  <br>        String password = <span class="hljs-string">&quot;myPasswordxxxxxxx&quot;</span>;  <br>        <span class="hljs-comment">// 在方法内调用 passwordEncoder 进行密码加密  </span><br>        String encodedPassword = passwordEncoder.encode(password);  <br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Encoded Password: &quot;</span> + encodedPassword;  <br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure>


<p><img src="/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250519160241335.png" srcset="/img/loading.gif" lazyload></p>
<p>Spring 可以通过字段注入（反射）注入依赖，但这种方式<strong>不能用在final字段上</strong>，因为final字段一旦初始化就不能再改。Spring 反射注入时，Java编译器没法确定这个final字段被初始化过，编译期就报错。<br><img src="/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250519160340948.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250519160346033.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="一、理论"><a href="#一、理论" class="headerlink" title="一、理论"></a>一、理论</h3><h3 id="0、导图：Map：Spring-IOC"><a href="#0、导图：Map：Spring-IOC" class="headerlink" title="0、导图：Map：Spring IOC"></a>0、导图：<a href="../../maps/Map%EF%BC%9ASpringIoC.xmind">Map：Spring IOC</a></h3><hr>
<p><img src="/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250518162951182.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9ASpring%20IOC/image-20250518163131432.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="1、Spring-IoC"><a href="#1、Spring-IoC" class="headerlink" title="1、Spring IoC"></a>1、Spring IoC</h3><h4 id="1-1、IoC-概述"><a href="#1-1、IoC-概述" class="headerlink" title="1.1、IoC 概述"></a>1.1、IoC 概述</h4><p>&#x3D;&#x3D;1.问题：代码高耦合度&#x3D;&#x3D;<br>在传统的面向对象编程中，类与类之间的依赖关系通常是直接创建的。这种直接依赖会导致代码高度耦合，使得系统的维护和测试变得困难。</p>
<p>尤其是在三层架构中，虽然层与层之间通过接口衔接，但直接依赖仍然存在。如果上层依赖下层，且下层发生改变时，上层也需要进行相应更改，这违背了软件开发中的开闭原则（OCP）和依赖倒转原则（DIP），例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 在 Service 层中直接实例化 Dao 层的对象  </span><br><span class="hljs-keyword">private</span> <span class="hljs-type">UserDao</span> <span class="hljs-variable">userDao</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserDaoImplForMySQL</span>();  <br>​  <br><span class="hljs-comment">// 在 Web 层中直接实例化 Service 层的对象  </span><br><span class="hljs-keyword">private</span> <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();<br></code></pre></td></tr></table></figure>


<p>&#x3D;&#x3D;2.IoC 解决方案&#x3D;&#x3D;<br>控制反转（IoC）是一种设计模式，将对象的创建和依赖关系的管理从应用程序代码中抽离出来，交由一个外部的容器或框架进行自动管理。</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-comment">// 在 IoC 容器管理下，依赖关系由容器处理</span><br><span class="hljs-keyword">private</span> UserDao userDao; <span class="hljs-comment">// 不直接实例化具体实现</span><br></code></pre></td></tr></table></figure>

<hr>
<h4 id="1-2、IoC-的实现方式"><a href="#1-2、IoC-的实现方式" class="headerlink" title="1.2、IoC 的实现方式"></a>1.2、IoC 的实现方式</h4><p>IoC 的实现方式主要有两种：</p>
<ol>
<li><font color="#00b0f0">构造器注入</font>：通过构造函数将依赖项注入。</li>
<li><font color="#00b0f0">Setter 注入</font>：通过 setter 方法将依赖项注入。</li>
</ol>
<hr>
<h4 id="1-3、Spring-IoC-是什么"><a href="#1-3、Spring-IoC-是什么" class="headerlink" title="1.3、Spring IoC 是什么"></a>1.3、Spring IoC 是什么</h4><p>Spring IoC 是 Spring 框架对 IoC 设计模式的具体实现。它可以根据配置文件或注解自动创建 Bean 对象，并对其进行依赖注入，从而有效管理 Bean 对象之间的依赖关系。此外，Spring IoC 还支持为 Bean 对象的属性赋予常量值，进一步增强了其灵活性和易用性。</p>
<hr>
<h3 id="2、Bean"><a href="#2、Bean" class="headerlink" title="2、Bean"></a>2、Bean</h3><h4 id="2-1、Bean-概述"><a href="#2-1、Bean-概述" class="headerlink" title="2.1、Bean 概述"></a>2.1、Bean 概述</h4><p>Bean 就是 Spring 容器所创建和管理的对象，Spring 容器负责这些对象的创建、生命周期的管理以及依赖关系的处理。</p>
<hr>
<h4 id="2-2、Bean-对象的生命周期"><a href="#2-2、Bean-对象的生命周期" class="headerlink" title="2.2、Bean 对象的生命周期"></a>2.2、Bean 对象的生命周期</h4><ol>
<li><p>&#x3D;&#x3D;实例化 Bean&#x3D;&#x3D;</p>
<ul>
<li>Spring 使用反射机制调用 Bean 的构造函数来创建 Bean 实例。默认使用无参构造函数，如果使用了构造注入，则使用相应的有参构造方法。</li>
</ul>
</li>
<li><p>&#x3D;&#x3D;Bean 的属性赋值&#x3D;&#x3D;</p>
<ul>
<li>在 Bean 实例化后，Spring 根据配置文件（如 XML 或注解）进行属性注入，完成依赖项的注入。</li>
</ul>
</li>
<li><p>&#x3D;&#x3D;检查 Aware 接口&#x3D;&#x3D;</p>
<ul>
<li>Spring 检查 Bean 是否实现了某些特定的 Aware 接口，例如 <code>BeanNameAware</code>、<code>BeanClassLoaderAware</code> 或 <code>BeanFactoryAware</code>。若实现，则调用相应的方法完成相关依赖的设置。</li>
</ul>
</li>
<li><p>&#x3D;&#x3D;Bean 后处理器 before 执行&#x3D;&#x3D;</p>
<ul>
<li>Spring 调用所有注册的 <code>BeanPostProcessor</code> 的 <code>postProcessBeforeInitialization</code> 方法，允许对 Bean 进行自定义操作和修改。</li>
</ul>
</li>
<li><p>&#x3D;&#x3D;检查 InitializingBean 接口并调用其方法&#x3D;&#x3D;</p>
<ul>
<li>检查 Bean 是否实现了 <code>InitializingBean</code> 接口。如果实现了，Spring 调用 <code>afterPropertiesSet</code> 方法进行初始化逻辑。</li>
</ul>
</li>
<li><p>&#x3D;&#x3D;初始化 Bean&#x3D;&#x3D;</p>
<ul>
<li>如果配置中指定了初始化方法（例如通过 <code>@PostConstruct</code> 注解或 XML 配置中的 <code>init-method</code>），Spring 会在此阶段调用这些初始化方法。</li>
</ul>
</li>
<li><p>&#x3D;&#x3D;Bean 后处理器 after 执行&#x3D;&#x3D;   </p>
<ul>
<li>Spring 调用所有注册的 <code>BeanPostProcessor</code> 的 <code>postProcessAfterInitialization</code> 方法，允许在 Bean 初始化后进行自定义操作和修改。</li>
</ul>
</li>
<li><p>&#x3D;&#x3D;使用 Bean&#x3D;&#x3D;</p>
<ul>
<li>Bean 完成初始化后，进入就绪状态，供应用程序使用。</li>
</ul>
</li>
<li><p>&#x3D;&#x3D;检查 DisposableBean 接口并调用其方法&#x3D;&#x3D;</p>
<ul>
<li>在 Bean 被销毁之前，Spring 检查 Bean 是否实现了 <code>DisposableBean</code> 接口。如果实现了，Spring 调用 <code>destroy</code> 方法进行资源释放等清理工作。</li>
</ul>
</li>
<li><p>&#x3D;&#x3D;销毁 Bean&#x3D;&#x3D;    </p>
<ul>
<li>在 Bean 生命周期的最后阶段，如果配置了自定义的销毁方法（如通过 <code>@PreDestroy</code> 注解或 XML 配置中的 <code>destroy-method</code>），Spring 会调用这些销毁方法，完成最终的清理工作。</li>
</ul>
</li>
</ol>
<hr>
<h4 id="2-3、Bean-对象的作用域"><a href="#2-3、Bean-对象的作用域" class="headerlink" title="2.3、Bean 对象的作用域"></a>2.3、Bean 对象的作用域</h4><p>Bean 的作用域决定了一个 Bean 实例的实例化时机、生命周期、存储方式和共享程度。常见的作用域有以下几种：</p>
<ul>
<li><p><strong>Singleton（默认，单例）</strong>：</p>
<ul>
<li><p><strong>实例化时机</strong>：Spring 容器初始化时立即创建所有的 Singleton Bean，或配置为懒加载。</p>
</li>
<li><p><strong>生命周期</strong>：从 Spring 容器初始化开始，到容器关闭为止，完成所有 10 个生命周期步骤。</p>
</li>
<li><p><strong>存储方式</strong>：实例存储在 Spring 容器内部的 <code>Map</code> 集合中，以 Bean 名称为键，实例为值。</p>
</li>
<li><p><strong>共享程度</strong>：整个应用程序中共享同一个实例，无论有多少次对该 Bean 的请求，都会返回同一个实例。</p>
</li>
</ul>
</li>
<li><p><strong>Prototype（原型）</strong>：</p>
<ul>
<li><p><strong>实例化时机</strong>：每次对 Bean 的请求都会创建一个新的实例。</p>
</li>
<li><p><strong>生命周期</strong>：仅限于请求的处理期间，Spring 不管理 Prototype Bean 的销毁，需要由应用程序代码自行处理，因此只完成生命周期前九步。</p>
</li>
<li><p><strong>存储方式</strong>：实例不在 Spring 容器中存储，每次请求获取的是不同的实例。</p>
</li>
<li><p><strong>共享程度</strong>：每次请求都会获得不同的实例，不共享。</p>
</li>
</ul>
</li>
<li><p><strong>Request（请求）</strong>（特定于 Web 应用程序）：</p>
<ul>
<li><p><strong>实例化时机</strong>：每次 HTTP 请求到达时创建实例。</p>
</li>
<li><p><strong>生命周期</strong>：从请求到达时开始，到请求处理完成后销毁实例，完成全部 10 个生命周期步骤。</p>
</li>
<li><p><strong>存储方式</strong>：实例存储在请求的上下文中。</p>
</li>
<li><p><strong>共享程度</strong>：在一次 HTTP 请求内共享，跨不同请求不共享。</p>
</li>
</ul>
</li>
<li><p><strong>Session（会话）</strong>（特定于 Web 应用程序）：</p>
<ul>
<li><p><strong>实例化时机</strong>：每次新的用户会话开始时创建实例。</p>
</li>
<li><p><strong>生命周期</strong>：从用户的 HTTP 会话开始时创建实例，到会话失效时销毁实例，完成全部 10 个生命周期步骤。</p>
</li>
<li><p><strong>存储方式</strong>：实例存储在会话上下文中。</p>
</li>
<li><p><strong>共享程度</strong>：在同一个会话中共享，跨不同会话不共享。</p>
</li>
</ul>
</li>
<li><p><strong>Global session（全局会话）</strong>（主要用于基于 Portlet 的 Web 应用）：</p>
<ul>
<li><p><strong>实例化时机</strong>：当 global session 开始时创建实例。</p>
</li>
<li><p><strong>生命周期</strong>：与 global session 生命周期相同，从 global session 开始时创建实例，到 global session 失效时销毁实例，完成全部 10 个生命周期步骤。</p>
</li>
<li><p><strong>存储方式</strong>：实例存储在 global session 上下文中。</p>
</li>
<li><p><strong>共享程度</strong>：在所有 Portlet 中共享同一个实例。</p>
</li>
</ul>
</li>
</ul>
<hr>
<h4 id="2-4、Bean-对象的实例化方式"><a href="#2-4、Bean-对象的实例化方式" class="headerlink" title="2.4、Bean 对象的实例化方式"></a>2.4、Bean 对象的实例化方式</h4><h5 id="2-4-1、前言：实例化方式-概述"><a href="#2-4-1、前言：实例化方式-概述" class="headerlink" title="2.4.1、前言：实例化方式 概述"></a>2.4.1、前言：实例化方式 概述</h5><p>Bean 的实例化由 Spring 框架负责。了解 Spring 如何实例化 Bean 以及如何配置 Bean 的实例化方式是配置和优化 Spring 应用的重要部分。Bean 的实例化方式包括：</p>
<ol>
<li><font color="#00b0f0">构造方法（本质）</font></li>
<li><font color="#00b0f0">简单工厂模式</font></li>
<li><font color="#00b0f0">实例工厂模式</font></li>
</ol>
<blockquote>
<p>[!NOTE] 注意事项</p>
<ol>
<li>这三种实例化方法，本质上都是通过调用类的构造方法实现的</li>
</ol>
</blockquote>
<hr>
<h5 id="2-4-2、构造方法"><a href="#2-4-2、构造方法" class="headerlink" title="2.4.2、构造方法"></a>2.4.2、构造方法</h5><p>Spring 默认使用无参构造方法创建 Bean 实例，如果使用了构造注入，则使用相应的有参构造方法。</p>
<hr>
<h5 id="2-4-3、简单工厂模式"><a href="#2-4-3、简单工厂模式" class="headerlink" title="2.4.3、简单工厂模式"></a>2.4.3、简单工厂模式</h5><p>&#x3D;&#x3D;1.工厂类&#x3D;&#x3D;</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">public</span> <span class="hljs-title class_"><span class="hljs-keyword">class</span> <span class="hljs-title">WeaponFactory</span> </span>&#123;  <br>​  <br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Weapon createWeapon(<span class="hljs-keyword">String</span> weaponType) &#123;  <br>		<span class="hljs-keyword">if</span> (weaponType == <span class="hljs-literal">null</span> || weaponType.trim().isEmpty()) &#123;  <br>			<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span><span class="hljs-type"></span> IllegalArgumentException(<span class="hljs-string">&quot;Weapon type must not be null or empty&quot;</span>);  <br>		&#125;  <br>		  <br>		<span class="hljs-keyword">switch</span> (weaponType.toLowerCase()) &#123;  <br>			<span class="hljs-keyword">case</span> <span class="hljs-string">&quot;sword&quot;</span>:  <span class="hljs-type"></span><br>				<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span><span class="hljs-type"></span> Sword();  <br>			<span class="hljs-keyword">case</span> <span class="hljs-string">&quot;bow&quot;</span>:  <span class="hljs-type"></span><br>				<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span><span class="hljs-type"></span> Bow();  <br>			<span class="hljs-keyword">default</span>:  <span class="hljs-type"></span><br>				<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span><span class="hljs-type"></span> IllegalArgumentException(<span class="hljs-string">&quot;Unknown weapon type&quot;</span>);  <br>		&#125;  <br>	&#125;  <br>&#125;<br></code></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;2.XML 配置&#x3D;&#x3D;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">声明产品 Bean</span><br><span class="hljs-comment">class：指向工厂类</span><br><span class="hljs-comment">factroy-method：指向工厂类的方法，Spring 将调用这个方法创建 Bean 实例</span><br><span class="hljs-comment">&lt;constructor-arg&gt;：为工厂类的静态方法传递参数</span><br><span class="hljs-comment">--&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;weapon&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.example.WeaponFactory&quot;</span> <span class="hljs-attr">factory-method</span>=<span class="hljs-string">&quot;createWeapon&quot;</span>&gt;</span> <br>	<span class="hljs-comment">&lt;!-- 通过 &lt;constructor-arg&gt; 元素传递工厂方法参数 --&gt;</span>  <br>	<span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;sword&quot;</span>/&gt;</span>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure>

<hr>
<h5 id="2-4-4、实例工厂模式"><a href="#2-4-4、实例工厂模式" class="headerlink" title="2.4.4、实例工厂模式"></a>2.4.4、实例工厂模式</h5><p>&#x3D;&#x3D;1.具体工厂角色&#x3D;&#x3D;</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">public</span> <span class="hljs-title class_"><span class="hljs-keyword">class</span> <span class="hljs-title">TankFactory</span> <span class="hljs-keyword"><span class="hljs-keyword">implements</span> <span class="hljs-type">WeaponFactory</span></span> </span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> Weapon <span class="hljs-keyword">get</span>() &#123;<br>		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span><span class="hljs-type"></span> Tank(); <br>	&#125; <br>&#125;<br></code></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;2.XML 配置&#x3D;&#x3D;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 声明具体工厂 Bean --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;gunFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.powernode.spring6.bean.GunFactory&quot;</span>/&gt;</span>  <br><br><span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment">声明产品 Bean</span><br><span class="hljs-comment">factory-bean：指向具体工厂 Bean，通过该工厂 Bean 创建目标 Bean</span><br><span class="hljs-comment">factory-method：指向具体工厂的方法，Spring 将调用这个方法创建 Bean 实例</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;gun&quot;</span> <span class="hljs-attr">factory-bean</span>=<span class="hljs-string">&quot;gunFactory&quot;</span> <span class="hljs-attr">factory-method</span>=<span class="hljs-string">&quot;get&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure>

<hr>
<h1 id="二、实操"><a href="#二、实操" class="headerlink" title="二、实操"></a>二、实操</h1><h3 id="1、基本开发步骤"><a href="#1、基本开发步骤" class="headerlink" title="1、基本开发步骤"></a>1、基本开发步骤</h3><h4 id="1-1、环境准备"><a href="#1-1、环境准备" class="headerlink" title="1.1、环境准备"></a>1.1、环境准备</h4><hr>
<h4 id="1-2、创建-Spring-IoC-项目"><a href="#1-2、创建-Spring-IoC-项目" class="headerlink" title="1.2、创建 Spring IoC 项目"></a>1.2、创建 Spring IoC 项目</h4><p>引入 <a target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/org.springframework/spring-context">Spring Context 依赖</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 1. Spring Context --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>xxxxx<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure>

<hr>
<h4 id="1-3、编写-Bean-类"><a href="#1-3、编写-Bean-类" class="headerlink" title="1.3、编写 Bean 类"></a>1.3、编写 Bean 类</h4><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QianDaYe</span> &#123;<br>    <span class="hljs-comment">// 1. 对象类型</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Object</span> userDao;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Object</span> bankDao;<br>    <br>    <span class="hljs-comment">// 2. 简单数组</span><br>	<span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] ages; <span class="hljs-comment">// 一维数组</span><br>	<span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[][] ages2D; <span class="hljs-comment">// 二维数组</span><br>    <br>    <span class="hljs-comment">// 3. 复杂数组</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Object</span>[] womens; <span class="hljs-comment">// 一维数组</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Object</span>[][] womens2D;  <span class="hljs-comment">// 二维数组</span><br>    <br>    <span class="hljs-comment">// 4. 简单 List 集合</span><br>    <span class="hljs-keyword">private</span> List&lt;Integer&gt; ageList;  <span class="hljs-comment">// Integer 类型 List</span><br>    <br>    <span class="hljs-comment">// 5. 复杂 List 集合</span><br>    <span class="hljs-keyword">private</span> List&lt;<span class="hljs-built_in">Object</span>&gt; womenList; <br>    <br>    <span class="hljs-comment">// 6. 简单 Set 集合</span><br>    <span class="hljs-keyword">private</span> Set&lt;Integer&gt; ageSet;  <span class="hljs-comment">// Integer 类型 Set</span><br>    <br>    <span class="hljs-comment">// 7. 复杂 Set 集合</span><br>    <span class="hljs-keyword">private</span> Set&lt;<span class="hljs-built_in">Object</span>&gt; womenSet; <br>    <br>	<span class="hljs-comment">// 8. 简单 Map 集合</span><br>    <span class="hljs-keyword">private</span> Map&lt;<span class="hljs-built_in">String</span>, Integer&gt; ageMap;  <span class="hljs-comment">// Integer 类型的 Map</span><br>    <br>    <span class="hljs-comment">// 9. 复杂 Map 集合</span><br>    <span class="hljs-keyword">private</span> Map&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Object</span>&gt; phones; <span class="hljs-comment">// Map 集合</span><br>    <br>    <span class="hljs-comment">// 10. 简单数据类型</span><br>    <br>    <span class="hljs-comment">// 10.1 基本数据类型</span><br>	<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;  <br>	<span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> isActive; <br>	<span class="hljs-keyword">private</span> <span class="hljs-type">double</span> balance;  <br>	<span class="hljs-keyword">private</span> <span class="hljs-type">char</span> grade; <br>	<span class="hljs-keyword">private</span> <span class="hljs-type">long</span> id;  <br>	<span class="hljs-keyword">private</span> <span class="hljs-type">float</span> weight; <br>	<br>	<span class="hljs-comment">// 10.2 包装类型</span><br>    <span class="hljs-keyword">private</span> Integer ageWrapper;  <br>    <span class="hljs-keyword">private</span> Boolean isActiveWrapper;  <br>    <span class="hljs-keyword">private</span> Double balanceWrapper; <br>    <span class="hljs-keyword">private</span> Character gradeWrapper;  <br>    <span class="hljs-keyword">private</span> Long idWrapper; <br>    <span class="hljs-keyword">private</span> Float weightWrapper; <br>    <br>	<span class="hljs-comment">// 10.3 字符串类型</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> name;  <br>    <br>    <br>    <span class="hljs-comment">// 有参构造</span><br>    <span class="hljs-comment">// 无参构造</span><br>    <span class="hljs-comment">// Getter 方法</span><br>    <span class="hljs-comment">// Setter 方法</span><br>    <span class="hljs-comment">// toString 方法</span><br>    <br>	<span class="hljs-comment">// 其他方法</span><br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h4 id="1-4、配置与使用-Bean"><a href="#1-4、配置与使用-Bean" class="headerlink" title="1.4、配置与使用 Bean"></a>1.4、配置与使用 Bean</h4><h5 id="1-4-1、配置概述"><a href="#1-4-1、配置概述" class="headerlink" title="1.4.1、配置概述"></a>1.4.1、配置概述</h5><p>在 Spring IoC 中，配置 Bean 的方式有三种：</p>
<ol>
<li>&#x3D;&#x3D;XML 配置文件 配置方式&#x3D;&#x3D;：<ol>
<li>在 <code>applicationContext.xml</code> 配置文件中进行声明 Bean 对象和配置属性注入<ol>
<li>优点：同一 Bean 类可以配置多个实例</li>
<li>缺点：仅适用于管理对象类型的 Bean</li>
</ol>
</li>
<li><font color="#00b0f0">构造注入</font>：<ol>
<li>通过构造器进行依赖注入，需要在 XML 中手动配置属性注入</li>
</ol>
</li>
<li><font color="#00b0f0">Setter 注入</font>：<ol>
<li>通过 setter 方法进行依赖注入，同样需要在 XML 中手动配置属性注入</li>
</ol>
</li>
<li><font color="#00b0f0">自动装配</font>：<ol>
<li>启用自动装配后，容器可自动匹配依赖，但无法注入基本数据类型及其集合（如简单数组、简单 List、简单 Set、简单 Map）</li>
</ol>
</li>
</ol>
</li>
<li>&#x3D;&#x3D;注解 + 扫描 配置方式（推荐）&#x3D;&#x3D;：<ol>
<li>结合注解（如 <code>@Component</code>、<code>@Resource</code>、<code>@Autowired</code>、<code>@Value</code> 等）和类路径扫描（XML 文件扫描或配置类扫描）实现声明 Bean 对象和配置属性注入<ol>
<li>优点：配置简单、减少 XML 文件，自动扫描和自动装配更加方便。</li>
<li>缺点：<ol>
<li>仅适用于管理对象类型的 Bean</li>
<li>同一 Bean 类只能声明一个实例（即同一个注解标注的对象）</li>
</ol>
</li>
</ol>
</li>
<li>在 Bean 类中声明 Bean 对象和配置属性注入<ol>
<li>对于对象类型及其集合（如复杂数组、复杂 List 、复杂 Set 、复杂 Map ），常通过 <code>@Autowired</code>、<code>@Resource</code>、<code>@Qualifier</code> 注解进行自动装配</li>
<li>对于基本数据类型及其集合（如简单数组、简单 List 、简单 Set 、简单 Map ），常通过 <code>@Value</code> 注解进行手动注入（需要加载外部 <code>properties</code> 文件）</li>
</ol>
</li>
<li>在配置类 或 XML 配置文件中扫描这些 Bean 类，使其被 Spring 容器管理。</li>
</ol>
</li>
<li>&#x3D;&#x3D;配置类 + 注解 + 扫描 配置方式&#x3D;&#x3D;<ol>
<li>在 Java 配置类（例如 <code>ApplicationConfig</code>）中，通过 <code>@Bean</code> 注解声明 Bean，同时配合注解（如 <code>@Component</code>、<code>@Resource</code>、<code>@Autowired</code>、<code>@Value</code> 等）和扫描机制（配置类扫描）管理组件。<ol>
<li>优点：<ol>
<li>不仅可以管理对象类型的 Bean，还支持数组、List、Set、Map 等多种类型的 Bean</li>
<li>允许为同一 Bean 类声明多个实例</li>
</ol>
</li>
<li>缺点：<ol>
<li>在配置类中，需要手动配置属性注入</li>
</ol>
</li>
</ol>
</li>
<li>在 <code>ApplicationConfig</code> 配置类中，使用 <code>@Bean</code> 注解声明 Bean 并配置属性输入，同时启用组件扫描以管理其他组件类。</li>
<li>在其他组件类可通过 <code>@Autowired</code>、<code>@Resource</code> 或 <code>@Qualifier</code> 注解自动装配这些 Bean，实现依赖注入。</li>
</ol>
</li>
</ol>
<hr>
<h5 id="1-4-2、配置方式1：XML-配置文件-配置方式"><a href="#1-4-2、配置方式1：XML-配置文件-配置方式" class="headerlink" title="1.4.2、配置方式1：XML 配置文件 配置方式"></a>1.4.2、配置方式1：XML 配置文件 配置方式</h5><h6 id="1-4-2-1、创建-Spring-IoC-XML-配置文件"><a href="#1-4-2-1、创建-Spring-IoC-XML-配置文件" class="headerlink" title="1.4.2.1、创建 Spring IoC XML 配置文件"></a>1.4.2.1、创建 Spring IoC XML 配置文件</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- applicationContext.xml --&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h6 id="1-4-2-2、采用构造注入"><a href="#1-4-2-2、采用构造注入" class="headerlink" title="1.4.2.2、采用构造注入"></a>1.4.2.2、采用构造注入</h6><p>&#x3D;&#x3D;1.为 Bean 类增添有参构造方法&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;2.声明 Bean 对象，并配置该 Bean 的属性注入&#x3D;&#x3D;</p>
<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="hljs-string"><span class="hljs-tag"><span class="language-xml">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="language-xml">       </span><br><span class="language-xml">    <span class="hljs-comment">&lt;!-- 1. 声明 QianDaYe Bean 对象，一个 &lt;bean&gt; 标签就是一个 Bean 对象 --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> </span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myBean&quot;</span>                          &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">Bean</span> <span class="hljs-attr">对象的唯一标识符</span>，<span class="hljs-attr">可以通过此</span> <span class="hljs-attr">ID</span> <span class="hljs-attr">引用该</span> <span class="hljs-attr">Bean</span>，<span class="hljs-attr">未指定时默认为类的全类名</span>，<span class="hljs-attr">例如</span> <span class="hljs-attr">com.example.MyBean</span>，<span class="hljs-attr">需要注意的是</span> <span class="hljs-attr">ID</span> <span class="hljs-attr">的首字母要小写</span> <span class="hljs-attr">--</span>&gt;</span></span><br><span class="language-xml">        class=&quot;com.example.MyBean&quot;           <span class="hljs-comment">&lt;!-- 必填项，Bean 对象的母 Bean 类的全类名，Spring 会使用这个类来创建 Bean 的实例 --&gt;</span></span><br><span class="language-xml">        primary=&quot;true&quot;                       <span class="hljs-comment">&lt;!-- 根据类型装配时，若有多个实现，该 Bean 为主要候选者 --&gt;</span></span><br><span class="language-xml">        lazy-init=&quot;true&quot;                     <span class="hljs-comment">&lt;!-- 是否开始懒加载，默认为 false，若为 true，Bean 对象将在第一次请求时被创建 --&gt;</span></span><br><span class="language-xml">        scope=&quot;prototype&quot;                    <span class="hljs-comment">&lt;!-- 指定 Bean 的作用域，默认为 singleton --&gt;</span></span><br><span class="language-xml">        init-method=&quot;initMethod&quot;             <span class="hljs-comment">&lt;!-- 初始化方法，该方法会在依赖注入完成后自动调用 --&gt;</span></span><br><span class="language-xml">        destroy-method=&quot;cleanup&quot;             <span class="hljs-comment">&lt;!-- 销毁方法，该方法会在 Spring 容器销毁 Bean 之前自动调用，通常用于清理资源 --&gt;</span></span><br><span class="language-xml">        factory-bean=&quot;myFactoryBean&quot;         <span class="hljs-comment">&lt;!-- 工厂 Bean，与 Bean 的实例化方式有关 --&gt;</span></span><br><span class="language-xml">        factory-method=&quot;createInstance&quot;      <span class="hljs-comment">&lt;!-- 工厂方法，与 Bean 的实例化方式有关 --&gt;</span></span><br><span class="language-xml">        autowire=&quot;byName&quot;&gt;                   <span class="hljs-comment">&lt;!-- 采用自动装配方式 --&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2. 配置该 Bean 的属性注入 --&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.1 对象类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;userDao&quot;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;bankDao&quot;</span> /&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.2 简单数组 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.2.1 一维数组 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> </span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>35<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.2.2 二维数组 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>35<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>40<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.3 复杂数组 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.3.1 一维数组 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>bean1<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>bean2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.3.2 二维数组 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Object1<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Object2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Object3<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Object4<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.4 简单 List 集合 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>35<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.5 复杂 List 集合 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Object1<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Object2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.6 简单 Set 集合 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> </span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.7 复杂 Set 集合 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Object1<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Object2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.8 简单 Map 集合 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;age1&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;25&quot;</span>/&gt;</span> </span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;age2&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;30&quot;</span>/&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.9 复杂 Map 集合 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-comment">&lt;!-- 2.9.1 值是对象 --&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;AnotherBean&quot;</span> /&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">                <span class="hljs-comment">&lt;!-- 2.9.2 值是 List 集合 --&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Item1<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Item2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Item3<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;bean1&quot;</span> /&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;bean2&quot;</span> /&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;bean3&quot;</span> /&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">                <span class="hljs-comment">&lt;!-- 2.9.3 值是 Set 集合 --&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;6&quot;</span>&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Value1<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Value2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Value3<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;bean1&quot;</span> /&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;bean2&quot;</span> /&gt;</span></span><br><span class="language-xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;bean3&quot;</span> /&gt;</span></span><br><span class="language-xml">                    <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.10 注入简单数据类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.10.1 基本数据类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;25&quot;</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- int 类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- boolean 类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;99.99&quot;</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- double 类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;A&quot;</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- char 类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1000L&quot;</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- long 类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;3.14&quot;</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- float 类型 --&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.10.2 包装类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;30&quot;</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- Integer 类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- Boolean 类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;200.50&quot;</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- Double 类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;B&quot;</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- Character 类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;5000&quot;</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- Long 类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;2.71&quot;</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- Float 类型 --&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 2.10.3 字符串类型 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;John Doe&quot;</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- String 类型 --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!-- 声明其他 Bean 对象 --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.example.bean.QianDaYe&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;qianDaYe&quot;</span> /&gt;</span></span><br><span class="language-xml">    </span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<hr>
<h6 id="1-4-2-3、采用-Setter-注入"><a href="#1-4-2-3、采用-Setter-注入" class="headerlink" title="1.4.2.3、采用 Setter 注入"></a>1.4.2.3、采用 Setter 注入</h6><p>&#x3D;&#x3D;1.为 Bean 类增添 Setter 方法&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;2.声明 Bean 对象，并配置该对象的属性注入&#x3D;&#x3D;<br>要将构造注入改为 setter 注入，你需要使用 <code>&lt;property&gt;</code> 标签来替代 <code>&lt;constructor-arg&gt;</code> 标签</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 1. 声明 QianDaYe Bean 对象 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myBean&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.example.MyBean&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">lazy-init</span>=<span class="hljs-string">&quot;true&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;prototype&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">init-method</span>=<span class="hljs-string">&quot;initMethod&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">destroy-method</span>=<span class="hljs-string">&quot;cleanup&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">factory-bean</span>=<span class="hljs-string">&quot;myFactoryBean&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">factory-method</span>=<span class="hljs-string">&quot;createInstance&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;byName&quot;</span>&gt;</span><br><br>        <span class="hljs-comment">&lt;!-- 2. 配置 Bean 对象的依赖关系 --&gt;</span><br>        <br>        <span class="hljs-comment">&lt;!-- 2.1 对象类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;userDao&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;bankDao&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;bankDao&quot;</span> /&gt;</span><br>        <br>        <span class="hljs-comment">&lt;!-- 2.2 简单数组 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;simpleArray&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> <br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>35<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <br>        <span class="hljs-comment">&lt;!-- 2.3 二维数组 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;twoDimArray&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>35<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>40<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <br>        <span class="hljs-comment">&lt;!-- 2.4 简单 List 集合 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;simpleList&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>35<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <br>        <span class="hljs-comment">&lt;!-- 2.5 复杂 List 集合 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;complexList&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Object1<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Object2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <br>        <span class="hljs-comment">&lt;!-- 2.6 简单 Set 集合 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;simpleSet&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><br>        <span class="hljs-comment">&lt;!-- 2.7 复杂 Set 集合 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;complexSet&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Object1<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Object2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <br>        <span class="hljs-comment">&lt;!-- 2.8 简单 Map 集合 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;simpleMap&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;age1&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;25&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;age2&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;30&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <br>        <span class="hljs-comment">&lt;!-- 2.9 复杂 Map 集合 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;complexMap&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- 2.9.1 值是对象 --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;AnotherBean&quot;</span> /&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br><br>                <span class="hljs-comment">&lt;!-- 2.9.2 值是 List 集合 --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Item1<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Item2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Item3<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;bean1&quot;</span> /&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;bean2&quot;</span> /&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;bean3&quot;</span> /&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br><br>                <span class="hljs-comment">&lt;!-- 2.9.3 值是 Set 集合 --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;6&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Value1<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Value2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Value3<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;bean1&quot;</span> /&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;bean2&quot;</span> /&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">&quot;bean3&quot;</span> /&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <br>        <span class="hljs-comment">&lt;!-- 2.10 注入简单数据类型 --&gt;</span><br>        <span class="hljs-comment">&lt;!-- 2.10.1 基本数据类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;simpleInt&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;25&quot;</span> /&gt;</span> <span class="hljs-comment">&lt;!-- int 类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;simpleBoolean&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span> <span class="hljs-comment">&lt;!-- boolean 类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;simpleDouble&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;99.99&quot;</span> /&gt;</span> <span class="hljs-comment">&lt;!-- double 类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;simpleChar&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;A&quot;</span> /&gt;</span> <span class="hljs-comment">&lt;!-- char 类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;simpleLong&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1000L&quot;</span> /&gt;</span> <span class="hljs-comment">&lt;!-- long 类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;simpleFloat&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;3.14&quot;</span> /&gt;</span> <span class="hljs-comment">&lt;!-- float 类型 --&gt;</span><br><br>        <span class="hljs-comment">&lt;!-- 2.10.2 包装类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;wrapperInteger&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;30&quot;</span> /&gt;</span> <span class="hljs-comment">&lt;!-- Integer 类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;wrapperBoolean&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span> /&gt;</span> <span class="hljs-comment">&lt;!-- Boolean 类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;wrapperDouble&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;200.50&quot;</span> /&gt;</span> <span class="hljs-comment">&lt;!-- Double 类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;wrapperCharacter&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;B&quot;</span> /&gt;</span> <span class="hljs-comment">&lt;!-- Character 类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;wrapperLong&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;5000&quot;</span> /&gt;</span> <span class="hljs-comment">&lt;!-- Long 类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;wrapperFloat&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;2.71&quot;</span> /&gt;</span> <span class="hljs-comment">&lt;!-- Float 类型 --&gt;</span><br><br>        <span class="hljs-comment">&lt;!-- 2.10.3 字符串类型 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;stringValue&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;John Doe&quot;</span> /&gt;</span> <span class="hljs-comment">&lt;!-- String 类型 --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 声明其他 Bean 对象 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.example.bean.QianDaYe&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;qianDaYe&quot;</span> /&gt;</span><br>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>

<hr>
<h6 id="1-4-2-4、采用自动装配"><a href="#1-4-2-4、采用自动装配" class="headerlink" title="1.4.2.4、采用自动装配"></a>1.4.2.4、采用自动装配</h6><p>&#x3D;&#x3D;1.为 Bean 类增添有参构造方法和 Setter 方法&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;2.声明 Bean 对象，并配置该对象的属性注入&#x3D;&#x3D;<br>Spring 提供了五种主要的自动装配模式，这些模式包括：<code>no</code>（默认）、<code>byName</code>、<code>byType</code>、<code>constructor</code>、<code>autodetect</code>。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br>	<span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;foo&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.example.Foo&quot;</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;autodetect&quot;</span>/&gt;</span><br>	<br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ol>
<li><p><font color="#00b0f0">no（默认）</font><br>默认情况下，Spring 不会进行自动装配，需要我们手动注入依赖，例如通过构造方法注入或 Setter 注入</p>
</li>
<li><p><font color="#00b0f0">byName</font><br>使用这种方式，Spring 会查找系统中与<strong>属性名相同</strong>的组件，自动进行注入。这种方式基于 Setter 注入，所以要为属性提供 Setter 方法</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Foo</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Bar</span> bar;  <span class="hljs-comment">// 看 bar</span><br><br>    <span class="hljs-comment">// Setter</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setBar</span>(<span class="hljs-params"><span class="hljs-title class_">Bar</span> bar</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">bar</span> = bar;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><font color="#00b0f0">byType</font><br>使用这种方式，Spring 会查找系统中与属性<strong>类型相同</strong>的组件，自动进行注入。这种方式基于 Setter 注入，所以要为属性提供 Setter 方法</p>
</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Foo</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Bar</span> bar;  <span class="hljs-comment">// 看 Bar</span><br><br>    <span class="hljs-comment">// Setter</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setBar</span>(<span class="hljs-params"><span class="hljs-title class_">Bar</span> bar</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">bar</span> = bar;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>[!NOTE] 注意：</p>
<ol>
<li>如果系统中存在多个属性类型匹配的组件，Spring 会无法决定注入那个组件，就会抛出 <code>NoUniqueBeanDefinitonException</code> 异常。</li>
<li>通过标记主要候选者可以解决此问题，例如：<br><code>&lt;bean id=&quot;primaryBar&quot; class=&quot;com.example.Bar&quot; primary=&quot;true&quot;/&gt;</code> 或在 Bean 类上使用 <code>@Primary</code> 注解。</li>
</ol>
</blockquote>
<ol start="4">
<li><font color="#00b0f0">constructor</font><br>使用这种方式，Spring 会自动查找系统中与构造函数参数<strong>类型匹配</strong>的组件，自动进行注入。这种方式基于构造方法注入，所以要为属性提供构造方法<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Foo</span> &#123;<br>    <span class="hljs-keyword">private</span> Bar bar;<br><br>    <span class="hljs-comment">// 构造方法</span><br>    <span class="hljs-keyword">public</span> Foo(Bar bar) &#123; <span class="hljs-comment">// 看这里的 Bar</span><br>        <span class="hljs-keyword">this</span>.bar = bar;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>[!NOTE] 注意<br>如果有多个构造函数，Spring 会选择参数最多的那个（前提是所有参数类型都能在容器中找到对应的 bean）。</p>
</blockquote>
<ol start="5">
<li><font color="#00b0f0">autodetect</font><br>使用这种方式，Spring 会首先尝试通过 constructor 方式进行注入，如果失败，则使用 byType 方式。这种方式基于 Setter 注入和 构造注入，所以既要为属性提供 Setter 方法又要为属性提供构造方法<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> &#123;<br>    <span class="hljs-keyword">private</span> Bar bar;<br><br>    <span class="hljs-comment">// 构造方法</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Foo</span>()</span> &#123;<br>        <span class="hljs-comment">// Default constructor</span><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Foo</span>(<span class="hljs-params">Bar bar</span>)</span> &#123;<br>        <span class="hljs-keyword">this</span>.bar = bar;<br>    &#125;<br>	<br>    <span class="hljs-comment">// Setter</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBar</span>(<span class="hljs-params">Bar bar</span>)</span> &#123;<br>        <span class="hljs-keyword">this</span>.bar = bar;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<hr>
<h5 id="1-4-3、配置方式2：注解-扫描-配置方式"><a href="#1-4-3、配置方式2：注解-扫描-配置方式" class="headerlink" title="1.4.3、配置方式2：注解 + 扫描 配置方式"></a>1.4.3、配置方式2：注解 + 扫描 配置方式</h5><h6 id="1-4-3-1、声明-Bean-对象"><a href="#1-4-3-1、声明-Bean-对象" class="headerlink" title="1.4.3.1、声明 Bean 对象"></a>1.4.3.1、声明 Bean 对象</h6><p>在类上标注 <code>@Component</code> 及其衍生注解（如 <code>@Service</code>, <code>@Repository</code>, <code>@Controller</code>），以指示该类是一个 Bean类并声明唯一个Bean 对象。</p>
<ul>
<li><code>@Component</code>：标注通用组件</li>
<li><code>@Service</code>：标注业务逻辑层（service 层）</li>
<li><code>@Repository</code>：标注数据访问层（dao 层、mapper 层）</li>
<li><code>@Controller</code>：标注表现层（Web 层）</li>
<li><code>@RestController</code>：<code>@RestController</code> &#x3D; <code>@Controller</code> + <code>@ResponseBody</code> ，使得每个方法的返回值都直接作为 HTTP 响应体返回。<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Component</span>(<span class="hljs-string">&quot;myBean1&quot;</span>) <span class="hljs-comment">// 必填项，标注 Bean 类和指定 ID，若未指定 ID，默认为类名的首字母小写形式（不是全类名）</span><br><span class="hljs-variable">@Scope</span>(<span class="hljs-string">&quot;prototype&quot;</span>)   <span class="hljs-comment">// 指定作用域，默认为单例(singleton)</span><br><span class="hljs-variable">@Lazy</span>                 <span class="hljs-comment">// 延迟加载，默认不开启，设置为 true 则会在第一次访问时创建 Bean</span><br><span class="hljs-variable">@DependsOn</span>(<span class="hljs-string">&quot;myBean2&quot;</span>) <span class="hljs-comment">// 指定依赖的其他 Bean，确保 myBean2 初始化完成后再实例化当前 Bean</span><br><span class="hljs-variable">@Primary</span>              <span class="hljs-comment">// 根据类型装配时，若有多个实现，该 Bean 为主要候选者</span><br>public class MyBean &#123;<br><br>    <span class="hljs-comment">// @PostConstruct：初始化方法，依赖注入完成后自动调用</span><br>    <span class="hljs-variable">@PostConstruct</span><br>    public void <span class="hljs-built_in">initMethod</span>() &#123;<br>        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">&quot;MyBean initialized with all dependencies.&quot;</span>);<br>        <span class="hljs-comment">// 可以在这里放置资源初始化逻辑</span><br>    &#125;<br><br>    <span class="hljs-comment">// @PreDestroy：销毁方法，在 Bean 被容器销毁前调用</span><br>    @<span class="hljs-selector-tag">PreDestroy</span><br>    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">cleanup</span>() &#123;<br>        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">&quot;MyBean is being destroyed. Cleaning up resources.&quot;</span>);<br>        <span class="hljs-comment">// 可以在这里执行清理操作</span><br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<hr>
<h6 id="1-4-3-2、配置属性注入"><a href="#1-4-3-2、配置属性注入" class="headerlink" title="1.4.3.2、配置属性注入"></a>1.4.3.2、配置属性注入</h6><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBean</span> &#123;<br><br>    <span class="hljs-comment">// @Autowired：实现按类型自动装配（byType）</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> MyRepository myRepository;<br>    <br>    <span class="hljs-comment">// @Autowired + @Qualifier：实现按名称自动装配（byName）</span><br>	<span class="hljs-meta">@Autowired</span><br>    <span class="hljs-meta">@Qualifier(<span class="hljs-string">&quot;specificRepository&quot;</span>)</span> <span class="hljs-comment">// 指定注入名称</span><br>    <span class="hljs-keyword">private</span> MyRepository specificRepository;<br>    <br>    <span class="hljs-comment">// @Resource：先按名称装配（byName），再按类型装配（byType）</span><br>	<span class="hljs-meta">@Resource(name = <span class="hljs-string">&quot;specificService&quot;</span>)</span> <br>    <span class="hljs-keyword">private</span> MyService myService;<br>    <br>    <span class="hljs-comment">// 1. 对象类型</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> Object userDao;<br>    <br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> Object bankDao;<br>    <br>    <span class="hljs-comment">// 2. 简单数组</span><br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;ages&#125;</span>&quot;</span>)</span><br>    <span class="hljs-keyword">private</span> int[] ages; <span class="hljs-comment">// 一维数组</span><br><br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;ages2D&#125;</span>&quot;</span>)</span><br>    <span class="hljs-keyword">private</span> int[][] ages2D; <span class="hljs-comment">// 二维数组</span><br>    <br>    <span class="hljs-comment">// 3. 复杂数组</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> Object[] womens; <span class="hljs-comment">// 一维数组</span><br>    <br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;womens2D&#125;</span>&quot;</span>)</span>  <br>    <span class="hljs-keyword">private</span> Object[][] womens2D;  <span class="hljs-comment">// 二维数组</span><br>    <br>    <span class="hljs-comment">// 4. 简单 List 集合</span><br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;ageList&#125;</span>&quot;</span>)</span><br>    <span class="hljs-keyword">private</span> List&lt;Integer&gt; ageList;<br>    <br>    <span class="hljs-comment">// 5. 复杂 List 集合</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> List&lt;Object&gt; womenList; <br>    <br>    <span class="hljs-comment">// 6. 简单 Set 集合</span><br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;ageSet&#125;</span>&quot;</span>)</span><br>    <span class="hljs-keyword">private</span> Set&lt;Integer&gt; ageSet; <br>    <br>    <span class="hljs-comment">// 7. 复杂 Set 集合</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> Set&lt;ComplexObject&gt; womenSet; <br>    <br>	<span class="hljs-comment">// 8. 简单 Map 集合</span><br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;ageMap&#125;</span>&quot;</span>)</span><br>    <span class="hljs-keyword">private</span> Map&lt;String, Integer&gt; ageMap; <br>    <br>    <span class="hljs-comment">// 9. 复杂 Map 集合</span><br>	<span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;phones&#125;</span>&quot;</span>)</span><br>    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; phones; <br>    <br>	<span class="hljs-comment">// 10. 简单数据类型</span><br>    <br>    <span class="hljs-comment">// 10.1 基本数据类型</span><br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;age&#125;</span>&quot;</span>)</span>  <br>    <span class="hljs-keyword">private</span> int age;  <br>    <br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;isActive&#125;</span>&quot;</span>)</span> <br>    <span class="hljs-keyword">private</span> boolean isActive; <br>    <br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;balance&#125;</span>&quot;</span>)</span>  <br>    <span class="hljs-keyword">private</span> double balance;  <br>    <br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;grade&#125;</span>&quot;</span>)</span>  <br>    <span class="hljs-keyword">private</span> char grade; <br>    <br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;id&#125;</span>&quot;</span>)</span>  <br>    <span class="hljs-keyword">private</span> long id;  <br>    <br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;weight&#125;</span>&quot;</span>)</span>  <br>    <span class="hljs-keyword">private</span> float weight; <br>    <br>    <span class="hljs-comment">// 10.2 包装类型</span><br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;ageWrapper&#125;</span>&quot;</span>)</span>  <br>    <span class="hljs-keyword">private</span> Integer ageWrapper;  <br>    <br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;isActiveWrapper&#125;</span>&quot;</span>)</span>  <br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Boolean</span> isActiveWrapper;  <br>    <br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;balanceWrapper&#125;</span>&quot;</span>)</span> <br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Double</span> balanceWrapper; <br>    <br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;gradeWrapper&#125;</span>&quot;</span>)</span>  <br>    <span class="hljs-keyword">private</span> Character gradeWrapper;  <br>    <br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;idWrapper&#125;</span>&quot;</span>)</span> <br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Long</span> idWrapper; <br>    <br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;weightWrapper&#125;</span>&quot;</span>)</span>  <br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Float</span> weightWrapper; <br>    <br>    <span class="hljs-comment">// 10.3 字符串类型</span><br>    <span class="hljs-meta">@Value(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;name&#125;</span>&quot;</span>)</span>  <br>    <span class="hljs-keyword">private</span> String name;  <br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h6 id="1-4-3-3、配置外部-properties-文件"><a href="#1-4-3-3、配置外部-properties-文件" class="headerlink" title="1.4.3.3、配置外部 properties 文件"></a>1.4.3.3、配置外部 properties 文件</h6><p>如果需要为基本数据类型及其集合进行注入，通常会通过配置外部 <code>properties</code> 文件，并将相应的属性值写入该文件中。</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># 1. 对象类型</span><br><span class="hljs-attr">userDao</span>=com.example.UserDao<br><span class="hljs-attr">bankDao</span>=com.example.BankDao<br><br><span class="hljs-comment"># 2. 简单数组</span><br><span class="hljs-attr">ages</span>=<span class="hljs-number">25</span>,<span class="hljs-number">30</span>,<span class="hljs-number">35</span> <br><span class="hljs-attr">ages2D</span>=<span class="hljs-number">25</span>,<span class="hljs-number">30</span>|<span class="hljs-number">35</span>,<span class="hljs-number">40</span> //&#123;<span class="hljs-number">25</span>,<span class="hljs-number">30</span>&#125; &#123;<span class="hljs-number">35</span>,<span class="hljs-number">40</span>&#125;<br><br><span class="hljs-comment"># 3. 复杂数组</span><br><span class="hljs-attr">womens</span>=Jane,Alice,Mary,Emily<br><span class="hljs-attr">womens2D</span>=Jane,Alice|Mary,Emily<br><br><span class="hljs-comment"># 4. 简单 List 集合</span><br><span class="hljs-attr">ageList</span>=<span class="hljs-number">25</span>,<span class="hljs-number">30</span>,<span class="hljs-number">35</span><br><br><span class="hljs-comment"># 5. 复杂 List 集合</span><br><span class="hljs-attr">womenList</span>=Jane,Alice,Mary,Emily<br><br><span class="hljs-comment"># 6. 简单 Set 集合</span><br><span class="hljs-attr">ageSet</span>=<span class="hljs-number">25</span>,<span class="hljs-number">30</span>,<span class="hljs-number">35</span><br><br><span class="hljs-comment"># 7. 复杂 Set 集合</span><br><span class="hljs-attr">womenSet</span>=Jane,Alice,Mary,Emily<br><br><span class="hljs-comment"># 8. 简单 Map 集合</span><br><span class="hljs-attr">ageMap</span>=age1:<span class="hljs-number">25</span>,age2:<span class="hljs-number">30</span>,age3:<span class="hljs-number">35</span><br><br><span class="hljs-comment"># 9. 复杂 Map 集合</span><br><span class="hljs-attr">phones</span>=home:<span class="hljs-number">1234567890</span>,<span class="hljs-literal">off</span>ice:<span class="hljs-number">0987654321</span><br><br><span class="hljs-comment"># 10. 简单数据类型</span><br><br><span class="hljs-comment">#10.1 基本数据类型</span><br><span class="hljs-attr">age</span>=<span class="hljs-number">25</span><br><span class="hljs-attr">isActive</span>=<span class="hljs-literal">true</span><br><span class="hljs-attr">balance</span>=<span class="hljs-number">99.99</span><br><span class="hljs-attr">grade</span>=A<br><span class="hljs-attr">id</span>=<span class="hljs-number">12345</span><br><span class="hljs-attr">weight</span>=<span class="hljs-number">70.5</span><br><br><span class="hljs-comment"># 10.2 包装类型</span><br><span class="hljs-attr">ageWrapper</span>=<span class="hljs-number">30</span><br><span class="hljs-attr">isActiveWrapper</span>=<span class="hljs-literal">false</span><br><span class="hljs-attr">balanceWrapper</span>=<span class="hljs-number">200.75</span><br><span class="hljs-attr">gradeWrapper</span>=B<br><span class="hljs-attr">idWrapper</span>=<span class="hljs-number">67890</span><br><span class="hljs-attr">weightWrapper</span>=<span class="hljs-number">80.5</span><br><br><span class="hljs-comment"># 10.3 字符串类型</span><br><span class="hljs-attr">name</span>=John Doe<br></code></pre></td></tr></table></figure>

<hr>
<h6 id="1-4-3-4、扫描-Bean-对象-加载外部-properties-文件"><a href="#1-4-3-4、扫描-Bean-对象-加载外部-properties-文件" class="headerlink" title="1.4.3.4、扫描 Bean 对象 + 加载外部 properties 文件"></a>1.4.3.4、扫描 Bean 对象 + 加载外部 properties 文件</h6><p>&#x3D;&#x3D;1.XML 配置文件 扫描方式&#x3D;&#x3D;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">	<span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">	<span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">	http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br>	<br>	<span class="hljs-comment">&lt;!-- 加载外部 properties 文件 --&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:application.properties,classpath:myconfig-config.properties&quot;</span> /&gt;</span><br>	<br>	<span class="hljs-comment">&lt;!-- 扫描包 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.example&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;2.配置类 扫描方式&#x3D;&#x3D;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs j">@Configuration<br>@ComponentScan(basePackages = &quot;com.example&quot;) // 扫描包<br>@PropertySource(&#123;&quot;classpath:application.properties&quot;, &quot;classpath:myconfig.properties&quot;&#125;) // 加载外部 properties 文件<br>public class ApplicationContextConfig &#123;<br>	......<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>[!NOTE] 注意事项：关于 properties 文件</p>
<ol>
<li>如果有多个 <code>properties</code> 文件，要确保文件加载的顺序，因为 Spring 会按顺序加载文件，后加载的文件会覆盖前面文件中相同的属性值。例如，<code>application.properties</code> 文件中的某个配置值如果在 <code>myconfig.properties</code> 中被重新定义，后者的值会覆盖前者。</li>
</ol>
</blockquote>
<hr>
<h5 id="1-4-4、配置方式3：配置类-注解-扫描-配置方式"><a href="#1-4-4、配置方式3：配置类-注解-扫描-配置方式" class="headerlink" title="1.4.4、配置方式3：配置类 +注解 + 扫描 配置方式"></a>1.4.4、配置方式3：配置类 +注解 + 扫描 配置方式</h5><h6 id="1-4-4-1、创建-Spring-IOC-配置类"><a href="#1-4-4-1、创建-Spring-IOC-配置类" class="headerlink" title="1.4.4.1、创建 Spring IOC 配置类"></a>1.4.4.1、创建 Spring IOC 配置类</h6><p>创建配置类 <code>ApplicationContextConfig</code>，并使用 <code>@Configuration</code> 标注此类为一个配置类。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl">// ApplicationContextConfig.java<br><br><span class="hljs-variable">@Configuration</span> // 表名这是个配置类<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ApplicationContextConfig</span> </span>&#123;<br>	......<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h6 id="1-4-4-2、声明-Bean-对象，并配置属性注入-组件扫描"><a href="#1-4-4-2、声明-Bean-对象，并配置属性注入-组件扫描" class="headerlink" title="1.4.4.2、声明 Bean 对象，并配置属性注入 + 组件扫描"></a>1.4.4.2、声明 Bean 对象，并配置属性注入 + 组件扫描</h6><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Configuration</span> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApplicationContextConfig</span> &#123;<br><br>	<span class="hljs-meta">@Bean</span>（                 <span class="hljs-comment">// 必填项，表示返回的结果是一个 Bean</span><br>    name=<span class="hljs-string">&quot;myService&quot;</span>,       <span class="hljs-comment">// 指定 Bean 的id，可省略，默认首字母小写</span><br>    initMehtod=<span class="hljs-string">&quot;init&quot;</span>,      <span class="hljs-comment">// 初始化方法，该方法会在依赖注入完成后自动调用</span><br>    destoryMethod=<span class="hljs-string">&quot;cleanup&quot;</span> <span class="hljs-comment">// 销毁方法，该方法会销毁 Bean 之前自动调用</span><br>    ）<br>    <span class="hljs-meta">@ComponentScan</span>(basePackages = <span class="hljs-string">&quot;com.example&quot;</span>) <span class="hljs-comment">// 扫描包</span><br>	<span class="hljs-meta">@Lazy</span>                   <span class="hljs-comment">// 懒加载，默认不开启</span><br>    <span class="hljs-meta">@Scope</span>(<span class="hljs-string">&quot;prototype&quot;</span>)     <span class="hljs-comment">// 指定作用域</span><br>    <span class="hljs-meta">@DependsOn</span>(<span class="hljs-string">&quot;myRepository&quot;</span>) <span class="hljs-comment">// 指定初始化顺序，在 myRepository 之后进行实例化</span><br>    <span class="hljs-meta">@Primart</span>                <span class="hljs-comment">// 根据类型装配时，若有多个实现，该 Bean 为主要候选者</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">MyService</span> <span class="hljs-title function_">myService</span>(<span class="hljs-params"></span>) &#123;<br>	    <span class="hljs-comment">// 手动使用构造方法 new Bean 实例</span><br>	    <span class="hljs-comment">// 配置该实例的属性注入</span><br>	    <span class="hljs-comment">// 最后返回该实例</span><br>    &#125;<br>    <br>	<span class="hljs-comment">// 1. 声明 Bean 对象</span><br>	<span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">QianDaYe</span> <span class="hljs-title function_">qianDaYe</span>(<span class="hljs-params"></span>) &#123;<br>	    <span class="hljs-comment">// 2. 手动使用构造方法 new Bean 实例</span><br>        <span class="hljs-title class_">QianDaYe</span> qianDaYe = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QianDaYe</span>();<br>        <span class="hljs-comment">// 3. 配置该实例的属性注入</span><br>        qianDaYe.<span class="hljs-title function_">setUserDao</span>(<span class="hljs-title function_">userDao</span>());<br>        qianDaYe.<span class="hljs-title function_">setBankDao</span>(<span class="hljs-title function_">bankDao</span>());<br>        qianDaYe.<span class="hljs-title function_">setWomens</span>(<span class="hljs-title function_">womens</span>());<br>        qianDaYe.<span class="hljs-title function_">setWomens2D</span>(<span class="hljs-title function_">womens2D</span>());<br>        qianDaYe.<span class="hljs-title function_">setWomenList</span>(<span class="hljs-title function_">womenList</span>());<br>        qianDaYe.<span class="hljs-title function_">setWomenSet</span>(<span class="hljs-title function_">womenSet</span>());<br>        qianDaYe.<span class="hljs-title function_">setPhones</span>(<span class="hljs-title function_">phones</span>());<br>        <span class="hljs-comment">// 4. 最后返回该实例</span><br>        <span class="hljs-keyword">return</span> qianDaYe;<br>    &#125;<br>    <br>    <span class="hljs-comment">// 2. 声明复杂数组 Bean</span><br>    <span class="hljs-comment">// 2.1 声明复杂一维数组 Bean</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span>[] <span class="hljs-title function_">womens</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]&#123;<br>	        <span class="hljs-title function_">bean1</span>(), <span class="hljs-title function_">bean2</span>(), <span class="hljs-title function_">bean3</span>()<br>        &#125;;<br>	&#125;<br>	<span class="hljs-comment">// 2.2 声明复杂二维数组 Bean</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span>[][] <span class="hljs-title function_">womens2D</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[][]&#123;<br>            &#123;<span class="hljs-title function_">bean1</span>(), <span class="hljs-title function_">bean2</span>()&#125;,<br>            &#123;<span class="hljs-title function_">bean3</span>(), <span class="hljs-title function_">bean4</span>()&#125;<br>        &#125;;<br>    &#125;<br><br>    <span class="hljs-comment">// 3. 声明复杂 List 类型 Bean</span><br>	<span class="hljs-meta">@Bean</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Object</span>&gt; <span class="hljs-title function_">womenList</span>(<span class="hljs-params"></span>) &#123;<br>	    <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Object</span>&gt; womenList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(); <br>	    womenList.<span class="hljs-title function_">add</span>(<span class="hljs-title function_">bean1</span>()); <br>	    womenList.<span class="hljs-title function_">add</span>(<span class="hljs-title function_">bean2</span>());<br>	    womenList.<span class="hljs-title function_">add</span>(<span class="hljs-title function_">bean3</span>());<br>	    <span class="hljs-keyword">return</span> womenList;<br>	&#125;<br><br>    <span class="hljs-comment">// 4. 声明复杂 Set 类型 Bean</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">Object</span>&gt; <span class="hljs-title function_">womenSet</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">Object</span>&gt; womenSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();<br>        womenSet.<span class="hljs-title function_">add</span>(<span class="hljs-title function_">bean1</span>());<br>        womenSet.<span class="hljs-title function_">add</span>(<span class="hljs-title function_">bean2</span>());<br>        womenSet.<span class="hljs-title function_">add</span>(<span class="hljs-title function_">bean3</span>());<br>        <span class="hljs-keyword">return</span> womenSet;<br>    &#125;<br><br>    <span class="hljs-comment">// 5. 声明复杂 Map 类型 Bean</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; <span class="hljs-title function_">phones</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; phones = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-comment">// 若值是对象</span><br>        phones.<span class="hljs-title function_">put</span>(<span class="hljs-string">&quot;home&quot;</span>, <span class="hljs-title function_">anotherBean</span>());<br>        <span class="hljs-comment">// 若值是 List 集合</span><br>        phones.<span class="hljs-title function_">put</span>(<span class="hljs-string">&quot;work&quot;</span>, <span class="hljs-title class_">Arrays</span>.<span class="hljs-title function_">asList</span>(<span class="hljs-string">&quot;Item1&quot;</span>, <span class="hljs-string">&quot;Item2&quot;</span>, <span class="hljs-string">&quot;Item3&quot;</span>));<br>        <span class="hljs-comment">// 若值是 Set 集合</span><br>        phones.<span class="hljs-title function_">put</span>(<span class="hljs-string">&quot;mobileSet&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;(<span class="hljs-title class_">Arrays</span>.<span class="hljs-title function_">asList</span>(<span class="hljs-string">&quot;Value1&quot;</span>, <span class="hljs-string">&quot;Value2&quot;</span>, <span class="hljs-string">&quot;Value3&quot;</span>)));<br>        <span class="hljs-keyword">return</span> phones;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<blockquote>
<p>[!NOTE] 注意事项</p>
<ol>
<li>在使用配置类声明 Bean 时，如果需要传入参数，Spring 会根据类型（byType）自动进行注入。如果存在多个实现，它会选择标记为主要候选者的 Bean。例如，下面的示例会自动注入 <code>AuthenticationConfiguration</code> 类型的 Bean：</li>
</ol>
</blockquote>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-meta">@Bean</span><br><span class="hljs-keyword">public</span> <span class="hljs-function">AuthenticationManager <span class="hljs-title">authenticationManager</span><span class="hljs-params">(AuthenticationConfiguration configuration)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">return</span> configuration.<span class="hljs-title">getAuthenticationManager</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h6 id="1-4-4-3、组件类中注入这些-Bean-对象"><a href="#1-4-4-3、组件类中注入这些-Bean-对象" class="headerlink" title="1.4.4.3、组件类中注入这些 Bean 对象"></a>1.4.4.3、组件类中注入这些 Bean 对象</h6><p>在组件类中可通过 <code>@Autowired</code>、<code>@Resource</code> 或 <code>@Qualifier</code> 注解自动装配这些 Bean，实现依赖注入。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComponent</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">AuthenticationManager</span> authenticationManager; <span class="hljs-comment">// 无需再次传参</span><br>    <br>	<span class="hljs-comment">// 使用注入的 Bean 进行操作</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">authenticateUser</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;AuthenticationManager injected: &quot;</span> + authenticationManager);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="2、Boot-简化开发"><a href="#2、Boot-简化开发" class="headerlink" title="2、Boot 简化开发"></a>2、Boot 简化开发</h3><h4 id="2-1、自动扫描-Bean-类"><a href="#2-1、自动扫描-Bean-类" class="headerlink" title="2.1、自动扫描 Bean 类"></a>2.1、自动扫描 Bean 类</h4><p>在 <code>src/main/java/com/example</code> 目录下创建一个名为 <code>Application</code> 的主类，并为其添加 <code>@SpringBootApplication</code> 注解。这个注解标识该类为 Spring Boot 应用的入口点，同时它还会自动扫描当前包及其子包中的组件，无需在配置文件中手动配置扫描路径。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* <span class="hljs-doctag">@SpringBootApplication</span> 是组合注解，包含</span><br><span class="hljs-comment">*    1. <span class="hljs-doctag">@SpringBootConfigutation</span>：标识为配置类</span><br><span class="hljs-comment">*    2. <span class="hljs-doctag">@EnableAutoConfiguration</span>：启用自动配置</span><br><span class="hljs-comment">*    3. <span class="hljs-doctag">@ComponentScan</span>：扫描当前包及子包的组件</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringBootDemoApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-title class_">String</span>[] args</span>) &#123;<br>        <span class="hljs-title class_">SpringApplication</span>.<span class="hljs-title function_">run</span>(<span class="hljs-title class_">SpringBootDemoApplication</span>.<span class="hljs-property">class</span>, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h4 id="2-2、属性绑定"><a href="#2-2、属性绑定" class="headerlink" title="2.2、属性绑定"></a>2.2、属性绑定</h4><p>在 Spring Boot 中，无需在不同文件中重复使用 <code>@Value</code> 进行注入。Spring Boot 提供了属性绑定功能，可以将配置文件（<code>application.properties</code> 或 <code>application.yaml</code>）中的属性值一键绑定到组件类的属性上，从而简化了配置和注入过程，提高了开发效率。</p>
<p>&#x3D;&#x3D;1.组件类&#x3D;&#x3D;</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Component</span>    <span class="hljs-comment">// 注入类声明为组件是必须的</span><br><span class="hljs-meta">@ConfigurationProperties</span>(prefix = <span class="hljs-string">&quot;app&quot;</span>)    <span class="hljs-comment">// Boot 属性绑定</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppProperties</span> &#123;<br>	<span class="hljs-comment">// 简单类型</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;  <span class="hljs-comment">// 简单类型</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> emptyString;  <span class="hljs-comment">// 空字符串</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> nullValue;  <span class="hljs-comment">// null 值</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> specialChar;  <span class="hljs-comment">// 特殊字符</span><br><br>	<span class="hljs-comment">// 简单数组 </span><br>	<span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span>[] names;  <span class="hljs-comment">// 一维数组</span><br>	<span class="hljs-keyword">private</span> int[][] coordinates;  <span class="hljs-comment">// 二维数组</span><br><br>	<span class="hljs-comment">// 简单 List 集合</span><br>	<span class="hljs-keyword">private</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt; users;<br><br>	<span class="hljs-comment">// 简单 Set 集合</span><br>	<span class="hljs-keyword">private</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">String</span>&gt; roles;<br><br>	<span class="hljs-comment">// 简单 Map 集合</span><br>	<span class="hljs-keyword">private</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>,<span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt;&gt; mapp<br>&#125; <br></code></pre></td></tr></table></figure>


<p>&#x3D;&#x3D;2.配置文件：application.properties&#x3D;&#x3D;</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># 简单类型</span><br>app.<span class="hljs-attribute">name</span>=MyApplication<br><br><span class="hljs-comment"># 空字符串</span><br>app.emptyString=<br><br><span class="hljs-comment"># null 值</span><br>app.<span class="hljs-attribute">nullValue</span>=<span class="hljs-literal">null</span><br><br><span class="hljs-comment"># 特殊字符(直接写特殊字符就好)</span><br>app.<span class="hljs-attribute">specialChar</span>=2&lt;3<br><br><span class="hljs-comment"># 一维数组</span><br>app.<span class="hljs-attribute">names</span>=Alice,Bob,Charlie<br><br><span class="hljs-comment"># 二维数组</span><br>app.<span class="hljs-attribute">coordinates</span>=1,2;3,4;5,6<br><br><span class="hljs-comment"># 简单 List 集合</span><br>app.<span class="hljs-attribute">users</span>=Alice,Bob,Charlie<br><br><span class="hljs-comment"># 简单 Set 集合</span><br>app.<span class="hljs-attribute">roles</span>=admin,user,guest<br><br><span class="hljs-comment"># 简单 Map 集合</span><br>app.mapp.<span class="hljs-attribute">users</span>=Alice,Bob,Charlie   #<span class="hljs-built_in"> users </span>是键，后面的是值<br>app.mapp.<span class="hljs-attribute">roles</span>=admin,user,guest    # roles 是键，后面的是值<br></code></pre></td></tr></table></figure>


<p>&#x3D;&#x3D;3.配置文件：application.yml&#x3D;&#x3D;</p>
<figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">app</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">name</span><span class="hljs-punctuation">:</span> <span class="hljs-string">MyApplication           # 简单类型</span><br>  <span class="hljs-attribute">emptyString</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;               # 空字符串</span><br>  <span class="hljs-attribute">nullValue</span><span class="hljs-punctuation">:</span> <span class="hljs-string">null               # null 值</span><br>  <span class="hljs-attribute">specialChar</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2&lt;3&quot;            # 特殊字符，建议使用引号</span><br><br>  <span class="hljs-attribute">names</span><span class="hljs-punctuation">:</span> <span class="hljs-string">                       # 一维数组</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">Alice</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">Bob</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">Charlie</span><br><br>  <span class="hljs-attribute">coordinates</span><span class="hljs-punctuation">:</span> <span class="hljs-string">                 # 二维数组</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">- 1</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">2</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">- 3</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">4</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">- 5</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">6</span><br><br>  <span class="hljs-attribute">users</span><span class="hljs-punctuation">:</span> <span class="hljs-string">                       # 简单 List 集合</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">Alice</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">Bob</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">Charlie</span><br><br>  <span class="hljs-attribute">roles</span><span class="hljs-punctuation">:</span> <span class="hljs-string">                       # 简单 Set 集合</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">admin</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">user</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">guest</span><br><br>  <span class="hljs-attribute">settings</span><span class="hljs-punctuation">:</span> <span class="hljs-string">                    # 简单 Map 集合，值为 List</span><br>    <span class="hljs-attribute">users</span><span class="hljs-punctuation">:</span> <span class="hljs-string">                     # 键：users，值为数组</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">Alice</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">Bob</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">Charlie</span><br>    <span class="hljs-attribute">roles</span><span class="hljs-punctuation">:</span> <span class="hljs-string">                     # 键：roles，值为数组</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">admin</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">user</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">guest</span><br></code></pre></td></tr></table></figure>

<hr>
<h4 id="2-3、唯一构造机制"><a href="#2-3、唯一构造机制" class="headerlink" title="2.3、唯一构造机制"></a>2.3、唯一构造机制</h4><p>在 Spring Boot 开发中，如果 Bean 类只有一个构造函数，则无需额外使用 <code>@Autowired</code> 等注解，Spring Boot 会自动根据构造函数中的参数类型（byType）进行装配：</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyService</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MyRepository myRepository;<br><br>    <span class="hljs-comment">// 只有一个构造函数，Spring 会自动根据参数类型注入 MyRepository</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyService</span><span class="hljs-params">(MyRepository myRepository)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.myRepository = myRepository;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">performAction</span><span class="hljs-params">()</span> </span>&#123;<br>        myRepository.save();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Java/" class="category-chain-item">Java</a>
  
  
    <span>></span>
    
  <a href="/categories/Java/Spring-%E7%94%9F%E6%80%81/" class="category-chain-item">Spring 生态</a>
  
  
    <span>></span>
    
  <a href="/categories/Java/Spring-%E7%94%9F%E6%80%81/Spring-IOC/" class="category-chain-item">Spring IOC</a>
  
  

  

  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>笔记：Spring IOC</div>
      <div>https://wangjia5289.github.io/2025/03/10/笔记：Spring IOC/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>霸天</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>March 10, 2025</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/03/10/%E7%AC%94%E8%AE%B0%EF%BC%9AHexo%20+%20Obsidian%20+Git%20Page/" title="笔记：Hexo + Obsidian +Git Page">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">笔记：Hexo + Obsidian +Git Page</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  



  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});

    Fluid.utils.listenDOMLoaded(function() {
      Fluid.events.registerRefreshCallback(function() {
        if ('mermaid' in window) {
          mermaid.init();
        }
      });
    });
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  var relativeDate = function() {
    var updatedTime = document.getElementById('updated-time');
    if (updatedTime) {
      var text = updatedTime.textContent;
      var reg = /\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|[+-]\d{2}:\d{2})/;
      var matchs = text.match(reg);
      if (matchs) {
        var relativeTime = moment(matchs[0]).fromNow();
        updatedTime.textContent = text.replace(reg, relativeTime);
      }
      updatedTime.style.display = '';
    }
  };
  Fluid.utils.createScript('https://lib.baomitu.com/moment.js/2.29.4/moment.min.js', function() {
    if (!'en'.startsWith('en')) {
      Fluid.utils.createScript('https://lib.baomitu.com/moment.js/2.29.4/locale/en.min.js', function() {
        relativeDate();
      });
    } else {
      relativeDate();
    }
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"display":{"superSample":2,"width":200,"height":350,"position":"left","hOffset":40,"vOffset":-20},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":1,"opacityOnHover":0.5},"log":false});</script></body>
</html>
